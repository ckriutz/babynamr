<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <!-- changed the default bootstrap.min.css file to be this one: http://bootswatch.com/paper/, but then I changed it back though the .min.css file still exists. :( -->
    <link href="Content/bootstrap.css" rel="stylesheet" />
    <link href="Content/font-awesome.min.css" rel="stylesheet" />
    <link href="Content/normalize.css" rel="stylesheet" />

    <link href="app.css" rel="stylesheet" />

    <script src="Scripts/jquery-1.9.1.min.js"></script>
    <script src="Scripts/bootstrap.min.js"></script>

    <script>
        var showStats = true;
        var statusUri = 'api/status/Get';
        var searchUri = 'api/babyname/Get';

        $(document).ready(function () {
            if (showStats) {
                $.getJSON(statusUri)
                .done(function (data) {
                    $('#statusBox').html("<h5>Status: " + data.StatusCode + " | # of items: " + data.DocumentCount + " | Storage Size: " + data.StorageSize + "</h5>");
                    $('#statusBox').addClass("alert alert-success");
                })
                .error(function (jqXHR, textStatus, errorThrown) {
                    $('#statusBox').html(errorThrown);
                    $('#statusBox').addClass("alert alert-danger");
                });
            }

            $('#txtSearch').keydown(function (event) {
                if (event.keyCode == 13) {
                    search($('#txtSearch').val());
                    return false;
                }
            });
        });

        function search(name) {
            $.getJSON(searchUri +  '?q=' + name)
                .done(function (data) {
                    $('#dataName').empty();
                    $('#resultsFound').html("Results Found: " + data.length);
                    for (var i = 0; i < data.length; i++) {
                        if (data[i].Document.gender == 'Male') {
                            $('#dataName').append("<div class='row rowboy'><div class='col-md-12'><h3>" + data[i].Document.name + "<br /><small>" + data[i].Document.orgin + "<br>"+data[i].Document.gender+"</br></small></h3>" + data[i].Document.meaning + "</div></div>");
                        }
                        if (data[i].Document.gender == 'Female') {
                            $('#dataName').append("<div class='row rowgirl'><div class='col-md-12'><h3>" + data[i].Document.name + "<br /><small>" + data[i].Document.orgin + "<br>" + data[i].Document.gender + "</br></small></h3>" + data[i].Document.meaning + "</div></div>");
                        }
                    }
                })
                .error(function (jqXHR, textStatus, errorThrown) {
                    //$('#statusBox').html(errorThrown);
                    //$('#statusBox').addClass("alert alert-danger");
                });
        }
    </script>
</head>
<body>
    <header class="jumbotron" role="banner">
        <div class="container" style="">
            <div class="row">
                <div class="col-md-12">
                    <h1>babynamr</h1>
                    <h3>The responsive way to search for and love a baby name.</h3>
                    <h5>test</h5>
                </div>
            </div>
        </div>
    </header>

    <section class="search-section">
        <div class="container">
            <div class="row">
                <div class="col-md-3"></div>
                <div class="col-md-6">
                    <form class="">
                        <div class="form-group">
                            <div class="input-group">
                                <div class="input-group-addon"><i class="fa fa-search"></i></div>
                                <input type="text" class="form-control" id="txtSearch" placeholder="Search for a name, origin or phrase">
                            </div>
                            <div style="text-align: center; padding-top: 10px;">
                                <button type="button" class="btn btn-primary" onclick="search(txtSearch.value)">search</button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="col-md-3"></div>
                </div>
        </div>
    </section>
    <section class="results-section">
        <div class="container">
            <div class="row">
                <div class="col-md-12" id="searchresults">
                    <h4 id="resultsFound"></h4>
                    <div id="dataName"></div>
                </div>
</div>
        </div>
    </section>
    <section class="status-section">
        <div class="container" id="statusContainer">
            <div class="row" style="text-align: center;">
                <div class="col-md-3">&nbsp;</div>
                <div class="col-md-6" id="statusBox"></div>
                <div class="col-md-3">&nbsp;</div>
            </div>
        </div>
    </section>


</body>



</html>
